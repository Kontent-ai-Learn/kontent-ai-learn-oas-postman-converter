# Kontent.ai OpenAPI to Postman Converter

This TypeScript application creates a Postman collection for the Kontent.ai APIs.

The application takes the OpenAPI specifications generated by the [Open API processor](https://github.com/KenticoDocs/kontent-docs-open-api-processor) service, converts them to Postman collections, tweaks the converted collections, and then merges them into a single collection.

## Overview

1. Fetches OpenAPI v3 specifications for the [Kontent.ai APIs](https://kontent.ai/learn/reference/kontent-apis-overview) from the specified URLs.
    * The URLs are specified using an environment variable.
    * The names of the JSON files are hardcoded.
2. Converts the downloaded OpenAPI specifications to Postman collections using the [openapi-to-postman](https://github.com/postmanlabs/openapi-to-postman) library.
3. For each converted Postman collection, the app makes the following changes:
    1. Uses a Postman variable named `project_id` for the `:project_id` path variable in every request that requires project ID in its path.
    2. Uses static base URLs for all requests instead of the `{{baseUrl}}` Postman variable.
    3. Removes extraneous Postman collection variables such as `{{baseUrl}}`.
4. Merges the processed Postman collections into a single collection.

## How to run locally

### Prerequisites

1. NodeJs v15 or higher
2. IDE such as Visual Studio Code

### Instructions

To run the app locally, you need to manually provide the blob storage URL. By default, the variable is read from environment variables and can be set up in app hosting platforms.

1. Open the `src\workerScript.ts`.
2. On line 8, change `process.env.BlobFolderUrl` to the URL of a remote folder with OpenAPI specifications.
3. Save changes.
4. In your terminal, run `npm install`.
5. In your terminal, run `npm run start`.
6. Make a request to <http://localhost:3000/collection.json>.

## Import generated collection to Postman

To import the generated collection to your locally running Postman:

1. In Postman, choose your workspace.
2. Click **Import**.
3. Switch to the **Link** tab.
4. In the **Enter a URL** field, provide a URL to the collection.json file that the app returns.
   * If running the converter app locally, the URL is `http://localhost:3000/collection.json`.
   * If the converted app is deployed somewhere, the URL is `https://<deployed-app-domain>/collection.json`.
5. Click **Continue**.

Postman will try to fetch the collection from the URL.

This request might take up to 90 seconds if the app is deployed to a free hosting service such as Heroku. When running locally, the request should be fulfilled within 30 seconds.

## How To Contribute

Feel free to open a new issue where you describe your proposed changes, or even create a new pull request from your branch with proposed changes.

## Licence

All source code is published under the MIT licence.
